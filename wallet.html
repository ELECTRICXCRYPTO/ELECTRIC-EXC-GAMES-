<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ربط المحفظة - EXC COIN</title>
</head>
<body>
    <h1 style="text-align: center;">ربط المحفظة - لعبة EXC COIN</h1>

    <!-- ويدجيت تسجيل الدخول الخاص بـ Telegram -->
    <div style="text-align: center; margin-top: 20px;">
        <script async src="https://telegram.org/js/telegram-widget.js?7"
                data-telegram-login="ELECTRIC_XCRYPTO_"  <!-- استبدل اسم المستخدم ببوتك -->
                data-size="large"
                data-radius="10"
                data-auth-url="javascript:handleAuth(user)"
                data-request-access="write">
        </script>
    </div>

    <!-- منطقة لعرض معلومات المستخدم -->
    <div id="user-info" style="text-align: center; margin-top: 20px;">
        <!-- سيتم عرض بيانات المحفظة هنا -->
    </div>

    <script>
        // وظيفة للتعامل مع بيانات تسجيل الدخول
        function handleAuth(user) {
            const userInfo = `
                <h3>تم الاتصال بنجاح!</h3>
                <p><strong>اسم المستخدم:</strong> ${user.first_name}</p>
                <p><strong>معرف المحفظة:</strong> ${user.id}</p>
                <a href="http://t.me/electricxexc_bot/exc" style="text-decoration: none; color: white; background-color: #007bff; padding: 10px 20px; border-radius: 5px;">اذهب إلى اللعبة</a>
            `;
            document.getElementById('user-info').innerHTML = userInfo;

            // حفظ معرف المستخدم في LocalStorage
            localStorage.setItem('walletAddress', user.id);
        }

        // عرض عنوان المحفظة المخزن (إذا كان موجودًا)
        window.onload = function () {
            const walletAddress = localStorage.getItem('walletAddress');
            if (walletAddress) {
                document.getElementById('user-info').innerHTML = `
                    <h3>متصل بعنوان المحفظة:</h3>
                    <p>${walletAddress}</p>
                    <a href="http://t.me/electricxexc_bot/exc" style="text-decoration: none; color: white; background-color: #007bff; padding: 10px 20px; border-radius: 5px;">اذهب إلى اللعبة</a>
                    <br><br>
                    <button onclick="logoutWallet()" style="padding: 10px 20px; background-color: red; color: white; border: none; border-radius: 5px;">تغيير المحفظة</button>
                `;
            }
        };

        // وظيفة لتسجيل الخروج
        function logoutWallet() {
            localStorage.removeItem('walletAddress');
            alert("تم فصل المحفظة بنجاح!");
            location.reload();
        }
    </script>
</body>
</html>
